{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://opendatalayer.org/schemas/v1/events/ai/feedback_given.schema.json",
  "title": "AI Feedback Given",
  "description": "Fired when a user gives feedback on an AI response (thumbs up/down, rating, or text).",
  "type": "object",
  "properties": {
    "conversationId": {
      "type": "string",
      "description": "Unique identifier for the conversation session."
    },
    "messageId": {
      "type": "string",
      "description": "Unique identifier for the message being rated."
    },
    "feedbackType": {
      "type": "string",
      "enum": ["positive", "negative", "rating", "correction", "flag"],
      "description": "The type of feedback provided by the user."
    },
    "rating": {
      "type": "number",
      "minimum": 0,
      "maximum": 5,
      "description": "Numeric rating given to the response on a 0-5 scale."
    },
    "comment": {
      "type": "string",
      "description": "Free-text comment provided by the user about the response."
    },
    "reason": {
      "type": "string",
      "enum": ["helpful", "accurate", "fast", "unhelpful", "inaccurate", "slow", "harmful", "irrelevant", "other"],
      "description": "The primary reason for the feedback."
    }
  },
  "required": ["conversationId", "messageId", "feedbackType"],
  "additionalProperties": false
}
